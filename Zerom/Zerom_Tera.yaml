pipeline {
    agent any
    stages 
    {
        stage('Git Checkout') 
        {
            steps
            {
                script {
                            git branch: '<BRANCH_NAME>',
                            url: '<SOURCE_CODE_REPO>'
                        }
            }
        }
        stage('Build') 
        {          
            steps 
            { 
                script 
                {    
                    try 
                    {           
                        dir(<DOCKER_FILE_PATH>+"/") 
                        {
                            sh "sudo docker build -t <DOCKER_HUB_REPOSITORY_NAME>/latest ."
                        }   
                    } 
                    catch (e) 
                    {
                        echo "An error occurred: ${e}"
                            sh "ls -l"
                    }
                }
            }
        }
         
        stage('Login to Docker Hub') 
        {      	
            steps
            {                       	
	                sh 'sudo docker login -u <DOCKER_HUB_USERID> -p <DOCKER_HUB_PASSWORD>'    
                    // sh 'sudo docker login -u raju.gupta@cyient.com -p P@ssword12345'    
	                echo 'Login Completed'      
            }   

        }  
        stage('Push') 
        {
            steps 
            {
                    sh "sudo docker push <DOCKER_HUB_REPOSITORY_NAME>/latest"
                    // sh "sudo docker push rajugupta8019/latest"
            }
        }    
    }
}

 
pipeline {
    agent any
    stages 
    {
        stage('Git Checkout') 
        {
            steps
            {
                script {
                            git branch: 'dev-raju-jenkintest',
                            url: 'https://Raju.Gupta:oe2odg5rtnxdfwmd2kducntb3lw74awdvprwgouuqpghtpcgu34a@dev.azure.com/devopsbricks/ML-Projects/_git/MLOps-Accelator'
                        }
            }
        }
        stage('Build') 
        {          
            steps 
            { 
                script 
                {    
                    try 
                    {           
                        dir("ProjectA/Components/ComponentA"+"/") 
                        {
                            sh "sudo docker build -t rajugupta8019/latest ."
                        }   
                    } 
                    catch (e) 
                    {
                        echo "An error occurred: ${e}"
                            sh "ls -l"
                    }
                }
            }
        }
         
        stage('Login to Docker Hub') 
        {      	
            steps
            {                       	
	                sh 'sudo docker login -u raju.gupta@cyient.com -p P@ssword12345'    
                    // sh 'sudo docker login -u raju.gupta@cyient.com -p P@ssword12345'    
	                echo 'Login Completed'      
            }   

        }  
        stage('Push') 
        {
            steps 
            {
                    sh "sudo docker push rajugupta8019/latest"
                    // sh "sudo docker push rajugupta8019/latest"
            }
        }    
    }
}

 